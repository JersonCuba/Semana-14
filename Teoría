
Semana 14 â€“ Manejo de Transacciones en SQL Server


---

ğŸ“Œ Â¿QuÃ© es una TransacciÃ³n?

Una transacciÃ³n es un conjunto de una o varias operaciones SQL que se ejecutan como una unidad lÃ³gica.
Esto significa que todas las operaciones se deben completar correctamente, o ninguna se aplica.

> Si una parte falla, se deshace todo para mantener la consistencia de la base de datos.




---

ğŸ¯ Objetivo de las Transacciones

Asegurar la integridad y consistencia de los datos durante operaciones como:

Insertar

Actualizar

Eliminar



---

ğŸ”¹ BEGIN TRANSACTION

Inicia la transacciÃ³n.
Todo lo que se ejecute despuÃ©s queda pendiente hasta confirmarse.

BEGIN TRANSACTION;


---

âœ… COMMIT

Confirma la transacciÃ³n.
Los cambios se vuelven permanentes en la base de datos.

COMMIT;


---

âŒ ROLLBACK

Revierte la transacciÃ³n.
Los cambios se deshacen desde el Ãºltimo BEGIN TRANSACTION.

ROLLBACK;


---

ğŸ§  Ejemplo PrÃ¡ctico â€“ Transferencia de Dinero

BEGIN TRANSACTION;

UPDATE Cuentas
SET Saldo = Saldo - 100
WHERE ID = 1;

UPDATE Cuentas
SET Saldo = Saldo + 100
WHERE ID = 2;

-- Si todo saliÃ³ bien:
COMMIT;

-- Si hubo error:
-- ROLLBACK;

ExplicaciÃ³n:

Si ambas operaciones funcionan, la transacciÃ³n se confirma.

Si una falla, se usa ROLLBACK para regresar los datos al estado original.



---

ğŸ›¡ Importancia de ROLLBACK

Evita errores como:

Saldos mal calculados

Inconsistencias en registros

Eliminaciones incompletas


Garantiza que la base de datos no quede a medias.


---

ğŸ SAVEPOINT (Opcional Avanzado)

Permite establecer un punto de guardado dentro de la transacciÃ³n para regresar parcialmente.

SAVE TRANSACTION Punto1;
ROLLBACK TRANSACTION Punto1;


---

ğŸ§  ConclusiÃ³n

Comando	FunciÃ³n

BEGIN TRANSACTION	Inicia la transacciÃ³n
COMMIT	Guarda los cambios definitivamente
ROLLBACK	Revierte los cambios
SAVEPOINT	Permite deshacer parcialmente


Las transacciones aseguran la integridad, mantienen la coherencia de los datos y permiten recuperarse de errores sin afectar la base de datos.


---

Â¿Quieres ahora que te dÃ© los scripts prÃ¡cticos de transacciones usando AdventureWorksLT, igual que en clase?
Responde: SÃ­ y te los genero listos para copiar ğŸ˜Š
